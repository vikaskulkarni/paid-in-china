{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./createExpense.js","webpack:///./libs/currency-converter.js","webpack:///./libs/dynamodb-lib.js","webpack:///./libs/money.js","webpack:///./libs/response-lib.js","webpack:///external \"aws-sdk\"","webpack:///external \"axios\"","webpack:///external \"uuid\""],"names":["main","event","context","data","JSON","parse","body","params","TableName","Item","expenseId","uuid","whatValue","whenValue","howMuch","currency","createdAt","Date","now","dynamoDbLib","currencyConverter","getAggregatedResult","Key","aggregateId","aggregatedValues","calculatedValues","stringify","calculateValue","whatValueChar","paramsAggregated","UpdateExpression","ExpressionAttributeValues","pwk","pmt","pyr","bwk","bmt","byr","cwk","cmt","cyr","countryTotal","bussinessTotal","personalTotal","allTotal","ReturnValues","updateResult","success","item","ipHowMuch","opHowMuch","e","failure","status","error","convert","resp","axios","get","fx","require","rates","base","result","from","to","call","action","dynamoDb","AWS","DynamoDB","DocumentClient","promise","root","undefined","obj","fxWrapper","version","fxSetup","settings","val","opts","length","i","getRate","_v","parseFloat","replace","_fx","fxProto","prototype","args","Array","slice","arguments","unshift","apply","wrapped","module","exports","buildResponse","statusCode","headers"],"mappings":"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","file":"createExpense.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./createExpense.js\");\n","import * as uuid from \"uuid\";\nimport * as dynamoDbLib from \"./libs/dynamodb-lib\";\nimport * as currencyConverter from \"./libs/currency-converter\";\nimport { success, failure } from \"./libs/response-lib\";\n\nexport async function main(event, context) {\n  const data = JSON.parse(event.body);\n  /* Input parameters while adding an expense */\n  const params = {\n    TableName: \"chinaPay\",\n    Item: {\n      expenseId: uuid.v1(),\n      whatValue: data.whatValue,\n      whenValue: data.whenValue,\n      howMuch: data.howMuch,\n      currency: data.currency,\n      createdAt: Date.now(),\n    },\n  };\n\n  try {\n    // Insert into chinaPay table\n    await dynamoDbLib.call(\"put\", params);\n\n    const howMuch = await currencyConverter.convert(\n      params.Item.howMuch,\n      params.Item.currency\n    );\n\n    // Get the aggregated results from the second table\n    const getAggregatedResult = await dynamoDbLib.call(\"get\", {\n      TableName: \"aggregatedChinaPay\",\n      Key: { aggregateId: \"12345\" },\n    });\n\n    const aggregatedValues = getAggregatedResult.Item;\n    // Store the aggregated table values into another variable to hold calculated values\n    let calculatedValues = JSON.parse(JSON.stringify(aggregatedValues));\n\n    const calculateValue = (whenValue, whatValueChar, howMuch) => {\n      switch (whenValue) {\n        case \"weekly\":\n          calculatedValues[`${whatValueChar}wk`] =\n            howMuch + aggregatedValues[`${whatValueChar}wk`];\n          break;\n        case \"monthly\":\n          calculatedValues[`${whatValueChar}mt`] =\n            howMuch + aggregatedValues[`${whatValueChar}mt`];\n          break;\n        case \"yearly\":\n          calculatedValues[`${whatValueChar}yr`] =\n            howMuch + aggregatedValues[`${whatValueChar}yr`];\n          break;\n      }\n    };\n\n    /* Determine what type of input entry, if personal, bussiness or country */\n    switch (params.Item.whatValue) {\n      case \"personal\":\n        // Store this as calculateValue.pwk or calculateValue.pmt or calculateValue.pyr\n        // based on the whenValue if it is week, month or year\n        calculateValue(params.Item.whenValue, \"p\", howMuch);\n        // Calculate personal total with current and previous values\n        calculatedValues[\"personalTotal\"] =\n          howMuch + aggregatedValues[\"personalTotal\"];\n        break;\n      case \"bussiness\":\n        // Store this as calculateValue.bwk or calculateValue.bmt or calculateValue.byr\n        // based on the whenValue if it is week, month or year\n        calculateValue(params.Item.whenValue, \"b\", howMuch);\n        // Calculate bussiness total with current and previous values\n        calculatedValues[\"bussinessTotal\"] =\n          howMuch + aggregatedValues[\"bussinessTotal\"];\n        break;\n      case \"country\":\n        // Store this as calculateValue.cwk or calculateValue.cmt or calculateValue.cyr\n        // based on the whenValue if it is week, month or year\n        calculateValue(params.Item.whenValue, \"c\", howMuch);\n        // Calculate country total with current and previous values\n        calculatedValues[\"countryTotal\"] =\n          howMuch + aggregatedValues[\"countryTotal\"];\n        break;\n    }\n    // Calculate the TOTAL\n    calculatedValues[\"allTotal\"] = howMuch + aggregatedValues[\"allTotal\"];\n\n    const paramsAggregated = {\n      TableName: \"aggregatedChinaPay\",\n      Key: {\n        aggregateId: \"12345\",\n      },\n      UpdateExpression:\n        \"SET pwk = :pwk, pmt = :pmt,  pyr = :pyr, \\\n        bwk = :bwk, bmt = :bmt,  byr = :byr, \\\n        cwk = :cwk, cmt = :cmt,  cyr = :cyr, \\\n        countryTotal = :countryTotal, bussinessTotal = :bussinessTotal, personalTotal = :personalTotal, allTotal = :allTotal\",\n      ExpressionAttributeValues: {\n        \":pwk\": calculatedValues.pwk,\n        \":pmt\": calculatedValues.pmt,\n        \":pyr\": calculatedValues.pyr,\n        \":bwk\": calculatedValues.bwk,\n        \":bmt\": calculatedValues.bmt,\n        \":byr\": calculatedValues.byr,\n        \":cwk\": calculatedValues.cwk,\n        \":cmt\": calculatedValues.cmt,\n        \":cyr\": calculatedValues.cyr,\n        \":countryTotal\": calculatedValues.countryTotal,\n        \":bussinessTotal\": calculatedValues.bussinessTotal,\n        \":personalTotal\": calculatedValues.personalTotal,\n        \":allTotal\": calculatedValues.allTotal,\n      },\n      ReturnValues: \"ALL_NEW\",\n    };\n    /*\n        This is how the input parameter values, paramsAggregated to be updated looks like;\n\n        :allTotal:240\n        :bmt:40\n        :bussinessTotal:40\n        :bwk:0\n        :byr:0\n        :cmt:0\n        :countryTotal:0\n        :cwk:0\n        :cyr:0\n        :personalTotal:200\n        :pmt:0\n        :pwk:200\n        :pyr:0\n\n    */\n    const updateResult = await dynamoDbLib.call(\"update\", paramsAggregated);\n\n    return success({\n      item: params.Item,\n      ipHowMuch: data.howMuch,\n      opHowMuch: howMuch,\n    });\n  } catch (e) {\n    return failure({ status: false, error: e });\n  }\n}\n","import axios from \"axios\";\n\nexport async function convert(howMuch, currency) {\n  const resp = await axios.get(\n    \"https://openexchangerates.org/api/latest.json?app_id=ffeb39cd300d480192407dc85aceed6c\"\n  );\n  const data = resp.data;\n  let fx = require(\"./money\");\n  if (typeof fx !== \"undefined\" && fx.rates) {\n    fx.rates = data.rates;\n    fx.base = data.base;\n  } else {\n  }\n\n  const result = fx.convert(howMuch, {\n    from: currency,\n    to: \"USD\",\n  });\n\n  return result;\n  //return result.data;\n}\n","import AWS from \"aws-sdk\";\n\nexport function call(action, params) {\n  const dynamoDb = new AWS.DynamoDB.DocumentClient();\n\n  return dynamoDb[action](params).promise();\n}\n","/*!\n * money.js / fx() v0.2\n * Copyright 2014 Open Exchange Rates\n *\n * JavaScript library for realtime currency conversion and exchange rate calculation.\n *\n * Freely distributable under the MIT license.\n * Portions of money.js are inspired by or borrowed from underscore.js\n *\n * For details, examples and documentation:\n * http://openexchangerates.github.io/money.js/\n */\n(function(root, undefined) {\n\n\t// Create a safe reference to the money.js object for use below.\n\tvar fx = function(obj) {\n\t\treturn new fxWrapper(obj);\n\t};\n\n\t// Current version.\n\tfx.version = '0.2';\n\n\n\t/* --- Setup --- */\n\n\t// fxSetup can be defined before loading money.js, to set the exchange rates and the base\n\t// (and default from/to) currencies - or the rates can be loaded in later if needed.\n\tvar fxSetup = root.fxSetup || {\n\t\trates : {},\n\t\tbase : \"\"\n\t};\n\n\t// Object containing exchange rates relative to the fx.base currency, eg { \"GBP\" : \"0.64\" }\n\tfx.rates = fxSetup.rates;\n\n\t// Default exchange rate base currency (eg \"USD\"), which all the exchange rates are relative to\n\tfx.base = fxSetup.base;\n\n\t// Default from / to currencies for conversion via fx.convert():\n\tfx.settings = {\n\t\tfrom : fxSetup.from || fx.base,\n\t\tto : fxSetup.to || fx.base\n\t};\n\n\n\t/* --- Conversion --- */\n\n\t// The base function of the library: converts a value from one currency to another\n\tvar convert = fx.convert = function(val, opts) {\n\t\t// Convert arrays recursively\n\t\tif (typeof val === 'object' && val.length) {\n\t\t\tfor (var i = 0; i< val.length; i++ ) {\n\t\t\t\tval[i] = convert(val[i], opts);\n\t\t\t}\n\t\t\treturn val;\n\t\t}\n\n\t\t// Make sure we gots some opts\n\t\topts = opts || {};\n\n\t\t// We need to know the `from` and `to` currencies\n\t\tif( !opts.from ) opts.from = fx.settings.from;\n\t\tif( !opts.to ) opts.to = fx.settings.to;\n\n\t\t// Multiple the value by the exchange rate\n\t\treturn val * getRate( opts.to, opts.from );\n\t};\n\n\t// Returns the exchange rate to `target` currency from `base` currency\n\tvar getRate = function(to, from) {\n\t\t// Save bytes in minified version\n\t\tvar rates = fx.rates;\n\n\t\t// Make sure the base rate is in the rates object:\n\t\trates[fx.base] = 1;\n\n\t\t// Throw an error if either rate isn't in the rates array\n\t\tif ( !rates[to] || !rates[from] ) throw \"fx error\";\n\n\t\t// If `from` currency === fx.base, return the basic exchange rate for the `to` currency\n\t\tif ( from === fx.base ) {\n\t\t\treturn rates[to];\n\t\t}\n\n\t\t// If `to` currency === fx.base, return the basic inverse rate of the `from` currency\n\t\tif ( to === fx.base ) {\n\t\t\treturn 1 / rates[from];\n\t\t}\n\n\t\t// Otherwise, return the `to` rate multipled by the inverse of the `from` rate to get the\n\t\t// relative exchange rate between the two currencies\n\t\treturn rates[to] * (1 / rates[from]);\n\t};\n\n\n\t/* --- OOP wrapper and chaining --- */\n\n\t// If fx(val) is called as a function, it returns a wrapped object that can be used OO-style\n\tvar fxWrapper = function(val) {\n\t\t// Experimental: parse strings to pull out currency code and value:\n\t\tif ( typeof\tval === \"string\" ) {\n\t\t\tthis._v = parseFloat(val.replace(/[^0-9-.]/g, \"\"));\n\t\t\tthis._fx = val.replace(/([^A-Za-z])/g, \"\");\n\t\t} else {\n\t\t\tthis._v = val;\n\t\t}\n\t};\n\n\t// Expose `wrapper.prototype` as `fx.prototype`\n\tvar fxProto = fx.prototype = fxWrapper.prototype;\n\n\t// fx(val).convert(opts) does the same thing as fx.convert(val, opts)\n\tfxProto.convert = function() {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift(this._v);\n\t\treturn convert.apply(fx, args);\n\t};\n\n\t// fx(val).from(currency) returns a wrapped `fx` where the value has been converted from\n\t// `currency` to the `fx.base` currency. Should be followed by `.to(otherCurrency)`\n\tfxProto.from = function(currency) {\n\t\tvar wrapped = fx(convert(this._v, {from: currency, to: fx.base}));\n\t\twrapped._fx = fx.base;\n\t\treturn wrapped;\n\t};\n\n\t// fx(val).to(currency) returns the value, converted from `fx.base` to `currency`\n\tfxProto.to = function(currency) {\n\t\treturn convert(this._v, {from: this._fx ? this._fx : fx.settings.from, to: currency});\n\t};\n\n\n\t/* --- Module Definition --- */\n\n\t// Export the fx object for CommonJS. If being loaded as an AMD module, define it as such.\n\t// Otherwise, just add `fx` to the global object\n\tif (typeof exports !== 'undefined') {\n\t\tif (typeof module !== 'undefined' && module.exports) {\n\t\t\texports = module.exports = fx;\n\t\t}\n\t\texports.fx = fx;\n\t} else if (typeof define === 'function' && define.amd) {\n\t\t// Return the library as an AMD module:\n\t\tdefine([], function() {\n\t\t\treturn fx;\n\t\t});\n\t} else {\n\t\t// Use fx.noConflict to restore `fx` back to its original value before money.js loaded.\n\t\t// Returns a reference to the library's `fx` object; e.g. `var money = fx.noConflict();`\n\t\tfx.noConflict = (function(previousFx) {\n\t\t\treturn function() {\n\t\t\t\t// Reset the value of the root's `fx` variable:\n\t\t\t\troot.fx = previousFx;\n\t\t\t\t// Delete the noConflict function:\n\t\t\t\tfx.noConflict = undefined;\n\t\t\t\t// Return reference to the library to re-assign it:\n\t\t\t\treturn fx;\n\t\t\t};\n\t\t})(root.fx);\n\n\t\t// Declare `fx` on the root (global/window) object:\n\t\troot['fx'] = fx;\n\t}\n\n\t// Root will be `window` in browser or `global` on the server:\n}(this));\n","export function success(body) {\n  return buildResponse(200, body);\n}\n\nexport function failure(body) {\n  return buildResponse(500, body);\n}\n\nfunction buildResponse(statusCode, body) {\n  return {\n    statusCode: statusCode,\n    headers: {\n      \"Access-Control-Allow-Origin\": \"*\",\n      \"Access-Control-Allow-Credentials\": true\n    },\n    body: JSON.stringify(body)\n  };\n}\n","module.exports = require(\"aws-sdk\");","module.exports = require(\"axios\");","module.exports = require(\"uuid\");"],"sourceRoot":""}